<div class="container">
<div class="row" style="padding:0 !important;">
	<div class="col s12" style="padding:0 !important;">
		<ul class="tabs" style="line-height:0 !important;">
			<li class="tab col s3" style="line-height:0 !important;"><a id="calcLink" href="#calculations" class="active" style="padding-top:3px" onclick="setCalcColor()">
				<table>
					<tr><td class="iconTab"><svg id="calculationsTabIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" style="padding-top:2px;">
					<path id="calcsvg" class="calculatorIcon" d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-17 5c0-1.654 1.346-3 3-3h6v9h-9v-6zm0 14v-6h9v9h-6c-1.654 0-3-1.346-3-3zm20 0c0 1.654-1.346 3-3 3h-6v-9h9v6zm0-8h-9v-9h6c1.654 0 3 1.346 3 3v6zm-2 6h-5v-1h5v1zm-5-11h5v1h-5v-1zm0 13v-1h5v1h-5zm-6-2v1h-2v2h-1v-2h-2v-1h2v-2h1v2h2zm-1.793-10.5l1.414 1.414-.707.707-1.414-1.414-1.414 1.414-.708-.707 1.414-1.414-1.414-1.414.707-.707 1.415 1.414 1.415-1.415.708.708-1.416 1.414zm9.793-2c0-.276.224-.5.5-.5s.5.224.5.5-.224.5-.5.5-.5-.224-.5-.5zm1 4c0 .276-.224.5-.5.5s-.5-.224-.5-.5.224-.5.5-.5.5.224.5.5z" fill="#FFFFFF"
					/></svg></td></tr>
					<tr><td class="iconTabText">Calculations</td></tr>
				</table>
			</a></li>
			<li class="tab col s3" style="line-height:0 !important;"><a id="searchesLink" href="#searches" style="padding-top:3px" onclick="setSearchColor()" >
			<table>
					<tr><td class="iconTab">
						<svg version="1.1" id="searchTabIcon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
						width="20" height="20"			x="0px" y="0px"
						viewBox="0 0 56.966 56.966" style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve">
						<path class="searchIcon" d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23
						s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92
						c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17
						s-17-7.626-17-17S14.61,6,23.984,6z" fill="#424242"/>
						</svg>
					</td></tr>
					<tr><td class="iconTabText">Searches</td></tr>
				</table>
			</a></li>
			<li class="tab col s3"style="line-height:0 !important;"><a id="activityLink" href="#activityStatus" style="padding-top:3px" onclick="setActivityColor()">
			<table>
					<tr><td class="iconTab">
						<svg version="1.1" id="activityTabIcon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
						width="20" height="20" viewBox="0 0 306 306" style="enable-background:new 0 0 306 306;" xml:space="preserve">
						<g>
						<g id="star-rate">
						<polygon class="activityIcon" points="153,230.775 247.35,299.625 211.65,187.425 306,121.125 191.25,121.125 153,6.375 114.75,121.125 0,121.125
						94.35,187.425 58.65,299.625 " fill="#424242"/>
						</g>
						</g>
						</svg>
					</td></tr>
					<tr><td class="iconTabText">Activity Status</td></tr>
				</table>
			</a></li>
		</ul>
	</div>

	<div id="calculations" class="col s12">
	</div>

	<div id="searches" class="col s12">
		Your saved search terms will be displayed here.
	</div>

	<div id="activityStatus" class="col s12">
		As you complete activities and quizes your results will be displayed here.
	</div>

</div>




</div>

<script type="text/javascript">
	$(document).ready(function(){
		$('.tabs').tabs();
		$('.collapsible').collapsible();
		notesFetchAllGroups();
	});

	function notesFetchAllGroups(){
		itemDB.simpleOpen("Calculations", 1, "calculations", function() {
			itemDB.fetchAll("calculations", function(myRecords){
				buildGroups(myRecords, "group");
			});
		});
	}

	function buildGroups(collection, property){
		var i = 0, val, index,
		values = [], result = [];
		for (; i < collection.length; i++) {
			val = collection[i][property];
			index = values.indexOf(val);
			if (index > -1)
			result[index].push(collection[i]);
			else {
				values.push(val);
				result.push([collection[i]]);
			}
		}
		displayGroups(result);
	}

	function buildFormula(record){
		var str = "";
		switch(record.cType){
			case("wip_w_thruput"):
			str = record.wip + " (W) = " + record.throughput + " (Thr) X " + record.flowtime + " (Flow)";
			break;
			case("wip_w_takt"):
			str = record.wip + " (W) = " + record.takt + " (Takt) X " + record.flowtime + " (Flow)";
			break;
			case("throughput"):
			str = record.flowtime + " (Flow) = " + record.wip + " (W) / " + record.throughput + " (Thr)";
			break;
			case("flowtime_w_thruput"):
			str = record.flowtime + " (Flow) = " + record.wip + " (W) / " + record.throughput + " (Thr)";
			break;
			case("flowtime_w_takt"):
			str = record.flowtime + " (Flow) = " + record.wip + " (W) X " + record.takt + " (Takt)";
			break;
			case("takt"):
			str = record.takt + " (Takt) = " + record.flowtime + " (Flow) / " + record.wip + " (W)";
			break;
		}
		return str;
	}

	function displayGroups(records){
		console.log(JSON.stringify(records));
		var rowCount = 0;
		var colCount = 0;
		var groupID = "";
		for(var i = 0; i < records.length; i++){
			if(records[i][0].group === ""){
				groupID = "No Group"
			}
			else{
				groupID = records[i][0].group;
			}

			$('<div>', {							//<div class="row collapseGroup">
			class: "row collapseGroup"
	}).append( $('<ul>', {				//<ul class="collapsible " style="background-color:#eeeeee;">
	    class: "collapsible ",
			style: "background-color:#eeeeee;"
	}).append( $('<li>', {				//<li>
	}).append( $('<div>', {				//<div id="groupA" class="col s10 collapsible-header"><b>All</b></div>
			id: "group" + i,
	    class: "col s10 collapsible-header",
			text: groupID
	})).append( $('<div>', {			//<div class="col s1 headerCollapsible" style="padding:0">				</div>
			class: "col s1 headerCollapsible",
			style: "padding:0"
	}).append( $('<img>', {				//<img src="css/svg/mail.svg" height="20px" width="20px" style="vertical-align:middle;">
			src: "css/svg/mail.svg",
			id: "mailImg",
			height: "10px",
			width: "10px",
			style: "vertical-align:middle; width: 20px; height: 20px;"
	}))).append( $('<div>', {			//<div class="col s1 headerCollapsible" style="padding:0">			</div>
			class: "col s1 headerCollapsible",
			style: "padding:0"
	}).append( $('<img>', {				//<img src="css/svg/trash.svg" height="20px" width="20px" style="vertical-align:middle;">
			src: "css/svg/trash.svg",
			id: "trashImg",
			height: "50%",
			width: "50%",
			style: "vertical-align:middle; width: 20px; height: 20px;"
	}))).append( $('<div>', {			//<div class="col 12 collapsible-body collapseBody">
			class: "col 12 collapsible-body collapseBody"
	}).append( $('<ul>', {				//<ul id="groupName"></ul>
			id: groupID
	}))))).appendTo('#calculations');
			$('.collapsible').collapsible();
			for(var j = 0; j < records[i].length; j++){
				createListElement(records[i][j], groupID);
			}
		}

	}

	document.getElementById("calculations").addEventListener("click",function(e) {
		if(e.target && e.target.nodeName == "LI") {
			console.log(e.target.innerText + " was clicked");
		}
	});

	function createListElement(record, ulID){
		var ul = document.getElementById(ulID);
		//var candidate = document.getElementById("candidate");
		var li = document.createElement("li");
		//li.setAttribute('id',candidate.value);
		var formula = buildFormula(record);
		var innerDiv = document.createElement("div");
		li.appendChil
		li.appendChild(document.createTextNode(record.name+ "     " + formula));
		ul.appendChild(li);
	}

	function setCalcColor()
	{
		$(".calculatorIcon").css("fill", "#FFFFFF");
		$(".searchIcon").css("fill", "#424242");
		$(".activityIcon").css("fill", "#424242");
	}

	function setSearchColor()
	{
		$(".searchIcon").css("fill", "#FFFFFF");
		$(".calculatorIcon").css("fill", "#424242");
		$(".activityIcon").css("fill", "#424242");

	}

	function setActivityColor()
	{
		 $(".activityIcon").css("fill", "#FFFFFF");
		 $(".searchIcon").css("fill", "#424242");
		 $(".calculatorIcon").css("fill", "#424242");

	}


	function checkIconColor(){
	var calcTab = document.getElementById("calcLink");
	var searchTab = document.getElementById("searchesLink");
	var activityTab = document.getElementById("activityLink");

	if(calcTab.className === "active"){
		alert("calc active");
	}
	else if(searchTab.className === "active"){
		alert("searchTab active");
	}
	else if(activityTab.className === "active"){
		alert("activityTab active");
	}
	}
</script>
